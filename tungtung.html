<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tungtungsahur Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #f7f7f7;
            font-family: 'Arial', sans-serif;
        }
        #gameCanvas {
            display: block;
            background-color: #f0f0f0;
            width: 100%;
            height: 100vh;
        }
        #scoreContainer {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #333;
            font-size: 24px;
            font-weight: bold;
            text-align: right;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        #soundToggle {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.7);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <button id="soundToggle">ðŸ”Š</button>
    <div id="scoreContainer">
        <div>HI <span id="highScore">00000</span></div>
        <div><span id="currentScore">00000</span></div>
    </div>
    <canvas id="gameCanvas"></canvas>
    <div id="controls">Press SPACE or UP to jump | Tap to jump on mobile</div>

    <audio id="bgMusic" loop>
        <source src="tung-tung-tung-tung-sahur.mp3" type="audio/mpeg">
    </audio>
    <audio id="jumpSound">
        <source src="jump-101soundboards.mp3" type="audio/mpeg">
    </audio>
    <audio id="gameOverSound">
        <source src="smb_gameover.wav" type="audio/mpeg">
    </audio>

    <script>
        // Game variables
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameSpeed = 5;
        let score = 0;
        let highScore = localStorage.getItem('dinoHighScore') || 0;
        let gameStarted = false;
        let gameOver = false;
        let animationId;
        let frameCount = 0;
        
        // Audio elements
        const bgMusic = document.getElementById('bgMusic');
        const jumpSound = document.getElementById('jumpSound');
        const gameOverSound = document.getElementById('gameOverSound');
        let soundOn = true;
        
        // Set canvas to full screen
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Adjust game elements based on screen size
            groundY = canvas.height * 0.8;
            dino.y = groundY - dino.height;
        }
        
        // Dino object
        const dino = {
            x: 50,
            y: 0,
            width: 100,
            height: 120,
            velocityY: 0,
            gravity: 0.5,
            jumpForce: -20,
            isJumping: false,
            img: new Image(),
            frame: 0,
            frameCount: 0,
            
            init: function() {
                this.img.src = '/IMG_20250714_131246.png';
                this.y = groundY - this.height;
            },
            
            update: function() {
                // Apply gravity
                this.velocityY += this.gravity;
                this.y += this.velocityY;
                
                // Check if landed on ground
                if (this.y >= groundY - this.height) {
                    this.y = groundY - this.height;
                    this.velocityY = 0;
                    this.isJumping = false;
                }
                
                // Animation
                if (!this.isJumping) {
                    this.frameCount++;
                    if (this.frameCount >= 10) {
                        this.frame = (this.frame + 1) % 2;
                        this.frameCount = 0;
                    }
                }
            },
            
            draw: function() {
                ctx.save();
                // Draw shadow
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/2, groundY + 5, 
                            this.width/2 * (1 - Math.abs(this.velocityY)/30), 5, 
                            0, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0,0,0,0.2)';
                ctx.fill();
                
                // Draw dino
                if (this.isJumping) {
                    // Rotate when jumping
                    const rotation = Math.min(Math.max(this.velocityY * 2, -20), 20);
                    ctx.translate(this.x + this.width/2, this.y + this.height/2);
                    ctx.rotate(rotation * Math.PI / 180);
                    ctx.drawImage(this.img, -this.width/2, -this.height/2, this.width, this.height);
                } else {
                    // Running animation
                    const offsetY = this.frame === 0 ? 0 : -5;
                    ctx.drawImage(this.img, this.x, this.y + offsetY, this.width, this.height);
                }
                ctx.restore();
            },
            
            jump: function() {
                if (!this.isJumping && gameStarted && !gameOver) {
                    this.velocityY = this.jumpForce;
                    this.isJumping = true;
                    if (soundOn) jumpSound.play();
                } else if (!gameStarted) {
                    startGame();
                } else if (gameOver) {
                    resetGame();
                }
            }
        };
        
        // Cactus object
        function Cactus() {
            this.width = 50 + Math.random() * 40;
            this.height = 70 + Math.random() * 70;
            this.x = canvas.width;
            this.y = groundY - this.height;
            this.speed = gameSpeed;
            this.img = new Image();
            this.img.src = '/download__4_-removebg-preview.png';
            
            this.update = function() {
                this.x -= this.speed;
            };
            
            this.draw = function() {
                ctx.drawImage(this.img, this.x, this.y, this.width, this.height);
            };
            
            this.collidesWith = function(dino) {
                return dino.x < this.x + this.width &&
                       dino.x + dino.width > this.x &&
                       dino.y < this.y + this.height &&
                       dino.y + dino.height > this.y;
            };
        }
        
        // Game elements
        let groundY;
        let cacti = [];
        let lastCactusTime = 0;
        let cactusInterval = 1500 + Math.random() * 1000;
        
        // Initialize game
        function init() {
            resizeCanvas();
            dino.init();
            document.getElementById('highScore').textContent = highScore.toString().padStart(4, '0');
            
            // Event listeners
            window.addEventListener('resize', resizeCanvas);
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' || e.key === ' ' || e.key === 'ArrowUp') {
                    e.preventDefault();
                    dino.jump();
                }
            });
            
            canvas.addEventListener('click', function() {
                dino.jump();
            });
            
            canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                dino.jump();
            });
            
            // Sound toggle
            document.getElementById('soundToggle').addEventListener('click', function() {
                soundOn = !soundOn;
                this.textContent = soundOn ? 'ðŸ”Š' : 'ðŸ”‡';
                if (soundOn && gameStarted && !gameOver) {
                    bgMusic.play();
                } else {
                    bgMusic.pause();
                }
            });
            
            // Start screen
            drawStartScreen();
        }
        
        // Start game
        function startGame() {
            gameStarted = true;
            gameOver = false;
            score = 0;
            gameSpeed = 5;
            cacti = [];
            frameCount = 0;
            lastCactusTime = 0;
            
            if (soundOn) {
                bgMusic.currentTime = 0;
                bgMusic.play();
            }
            
            // Start game loop
            gameLoop();
        }
        
        // Game loop
        function gameLoop() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw background
            drawBackground();
            
            // Update and draw dino
            dino.update();
            dino.draw();
            
            // Update and draw cacti
            updateCacti();
            
            // Check collisions
            checkCollisions();
            
            // Update score
            updateScore();
            
            // Continue animation if game not over
            if (!gameOver) {
                animationId = requestAnimationFrame(gameLoop);
            } else {
                drawGameOver();
            }
        }
        
        // Draw background
        function drawBackground() {
            // Sky gradient
            const skyGradient = ctx.createLinearGradient(0, 0, 0, groundY);
            skyGradient.addColorStop(0, '#87CEEB');
            skyGradient.addColorStop(1, '#E0F7FF');
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, canvas.width, groundY);
            
            // Ground
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);
            
            // Ground details
            ctx.fillStyle = '#A0522D';
            for (let i = 0; i < canvas.width; i += 30) {
                const height = 5 + Math.random() * 10;
                ctx.fillRect(i, groundY, 20, height);
            }
            
            // Clouds
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            for (let i = 0; i < 5; i++) {
                const x = (frameCount * 0.2 + i * 200) % (canvas.width + 100) - 50;
                const y = 50 + i * 40;
                const width = 60 + Math.random() * 40;
                const height = 30 + Math.random() * 20;
                
                ctx.beginPath();
                ctx.ellipse(x, y, width/2, height/2, 0, 0, Math.PI * 2);
                ctx.ellipse(x + width/3, y - height/3, width/3, height/3, 0, 0, Math.PI * 2);
                ctx.ellipse(x + width/2, y, width/4, height/3, 0, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // Update cacti
        function updateCacti() {
            // Add new cactus
            const now = Date.now();
            if (now - lastCactusTime > cactusInterval && gameStarted) {
                cacti.push(new Cactus());
                lastCactusTime = now;
                cactusInterval = 1500 + Math.random() * 1000;
                
                // Increase difficulty
                gameSpeed += 0.05;
            }
            
            // Update and remove off-screen cacti
            for (let i = cacti.length - 1; i >= 0; i--) {
                cacti[i].update();
                cacti[i].draw();
                
                if (cacti[i].x + cacti[i].width < 0) {
                    cacti.splice(i, 1);
                }
            }
        }
        
        // Check collisions
        function checkCollisions() {
            for (let cactus of cacti) {
                if (cactus.collidesWith(dino)) {
                    gameOver = true;
                    if (soundOn) {
                        bgMusic.pause();
                        gameOverSound.play();
                    }
                    break;
                }
            }
        }
        
        // Update score
        function updateScore() {
            frameCount++;
            if (frameCount % 5 === 0) {
                score++;
                document.getElementById('currentScore').textContent = score.toString().padStart(4, '0');
                
                // Update high score
                if (score > highScore) {
                    highScore = score;
                    document.getElementById('highScore').textContent = highScore.toString().padStart(4, '0');
                    localStorage.setItem('dinoHighScore', highScore);
                }
            }
        }
        
        // Draw start screen
        function drawStartScreen() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBackground();
            
            // Dino
            dino.draw();
            
            // Text
            ctx.fillStyle = '#333';
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('TungTungTungSahur', canvas.width/2, canvas.height/2 - 50);
            
            ctx.font = '20px Arial';
            ctx.fillText('Press SPACE or UP to jump | Tap to jump on mobile', canvas.width/2, canvas.height/2);
            ctx.fillText('Diabuat Oleh PutzzTech', canvas.width/2, canvas.height/2 + 30);
            
            ctx.font = '16px Arial';
            ctx.fillText('High Score: ' + highScore.toString().padStart(4, '0'), canvas.width/2, canvas.height/2 + 80);
        }
        
        // Draw game over screen
        function drawGameOver() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#fff';
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', canvas.width/2, canvas.height/2 - 50);
            
            ctx.font = '20px Arial';
            ctx.fillText('Score: ' + score.toString().padStart(4, '0'), canvas.width/2, canvas.height/2);
            ctx.fillText('High Score: ' + highScore.toString().padStart(4, '0'), canvas.width/2, canvas.height/2 + 40);
            
            ctx.font = '16px Arial';
            ctx.fillText('Press SPACE or tap to restart', canvas.width/2, canvas.height/2 + 90);
        }
        
        // Reset game
        function resetGame() {
            cancelAnimationFrame(animationId);
            gameStarted = false;
            gameOver = false;
            drawStartScreen();
        }
        
        // Initialize the game when window loads
        window.addEventListener('load', init);
    </script>
</body>
</html> 
